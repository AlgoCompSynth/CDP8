if(APPLE)
  set(CMAKE_C_FLAGS "-O2 -Wall  -Dunix  -DMAC -DPA_USE_COREAUDIO -mmacosx-version-min=10.9 -fomit-frame-pointer -funroll-loops")
  set(CMAKE_CXX_FLAGS "-O2 -Wall  -Dunix -DMAC -DPA_USE_COREAUDIO -fomit-frame-pointer -mmacosx-version-min=10.9 -funroll-loops -std=c++11 -stdlib=libc++")
  include_directories ( /Developer/Headers/FlatCarbon )
  find_library(COREAUDIOLIB CoreAudio)
  find_library(AUDIOTOOLBOX AudioToolbox)
  find_library(AULIB AudioUnit)
  find_library(CARBONLIB Carbon)
  link_directories (/usr/local/lib)
  find_library(PA NAMES libportaudio.a)
  find_library(AAIOLIB NAMES libaaio.a)
  set(EXTRA_LIBRARIES1 pthread ${AAIOLIB} ${PA} ${COREAUDIOLIB} ${AUDIOTOOLBOX} ${AULIB} ${CARBONLIB} ${EXTRA_LIBRARIES})
else()
  if(MINGW)
    set(CMAKE_C_FLAGS "-O3 -DWIN32 -D_WIN32 -DUSE_ASIO -fomit-frame-pointer -funroll-loops")
    set(CMAKE_CXX_FLAGS "-O3 -DWIN32 -D_WIN32 -DUSE_ASIO -fomit-frame-pointer -funroll-loops -static-libgcc -static-libstdc++")
    set(EXTRA_LIBRARIES1 winmm dsound winspool ${EXTRA_LIBRARIES})
  else()
    link_directories (/usr/local/lib)
    find_library(AAIOLIB NAMES libaaio.a)
    find_library(PA NAMES libportaudio.a)
    set(CMAKE_C_FLAGS "-O3 -Wall -Dlinux -Dunix -fomit-frame-pointer -funroll-loops")
    set(EXTRA_LIBRARIES1 asound jack pthread ${AAIOLIB} ${PA}  ${EXTRA_LIBRARIES})
  endif()
endif()
# ../portaudio/lib/.libs
link_directories( ../../lib  ../../../newsfsys ../../../pvxio2)
# need /usr/local/include here?
include_directories(/usr/local/include ../../../newinclude ../include ../portaudio/include ../portaudio/src/common)
#../portaudio/src/common/pa_ringbuffer.c
add_executable(pvplay pvplay.cpp pvoc2.cpp fmhfuncs.c pvthreads.cpp mxfft.c)
target_link_libraries(pvplay portaudio sfsys pvxio2 ${EXTRA_LIBRARIES1})

my_install(pvplay)
